(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{473:function(t,n,o){"use strict";o.r(n);var r=o(2),e=Object(r.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("Pika 社区很高兴宣布，我们今天发布已经过我们生产环境验证 v3.5.1 版本 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Freleases%2Ftag%2Fv3.5.1",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/OpenAtomFoundation/pika/releases/tag/v3.5.1"),n("OutboundLink")],1),t._v(" 。")]),t._v(" "),n("p",[t._v("该版本不仅做了很多优化工作，还引入了多项新功能。这些新功能包括 动态关闭 WAL、ReplicationID 检测是否增量复制、在 K8s 环境上 Pika 服务的自动注册从而实现集群的自组织、以及 exporter 检测集群指标等等，无疑将会让用户享受到更为稳定和高效的 NoSQL 使用体验。")]),t._v(" "),n("h2",{attrs:{id:"_1-新特性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-新特性"}},[t._v("#")]),t._v(" 1 新特性")]),t._v(" "),n("ul",[n("li",[t._v("1 Slow log 增加队列等待时间统计，在队列阻塞的时候方便我们进行问题定位。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F1997",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 1997"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fwangshao1",target:"_blank",rel:"noopener noreferrer"}},[t._v("wangshao1"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("2 主从复制使用 ReplicationID 判断是否进行增量同步，解决原主从同步方式切主后整个数据集会进行全量复制的问题，可以提升 Pika 性能。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F1951",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 1951"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FMixficsol",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mixficsol"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("3 WAL 以 'disablewal' 命令方式支持动态关闭，在写性能遇到瓶颈的时候，可以通过命令关闭 WAL   缓解写性能下降的问题，关闭 WAL 有机器宕机后丢失数据的风险，用户需要根据自己的使用习惯权衡。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F2015",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 2015"),n("OutboundLink")],1),t._v("，作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FMixficsol",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mixficsol"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("4 flush 线程数和 compaction 线程数合二为一，在 Compaction 性能瓶颈时，可以动态调整线程数，缓解 Comapction 损耗 Pika 性能的问题。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F2014",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 2014"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FTianpingan",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tianpingan"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("5 升级了 RocksDB 版本到 v8.3.3。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F2000",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 2000"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fdingxiaoshuai123",target:"_blank",rel:"noopener noreferrer"}},[t._v("dingxiaoshuai123"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("6 新增周期性打印工作队列的长度功能，在队列阻塞的时候可以快速定位问题。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F1978",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 1978"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FTianpingan",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tianpingan"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("7 新增利用一个  "),n("code",[t._v("pika_exporter")]),t._v("  监测整个集群的指标，实现一个 Pika Exporter 实例监控整个集群，解决了 3.5.0 版本一个  Pika Exporter   监测一个 Pika 实例消耗资源的问题。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F1953",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 1953"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fchenbt-hz",target:"_blank",rel:"noopener noreferrer"}},[t._v("chenbt-hz"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("8 实现在   K8s   环境上   Pika   服务的自动注册，在启动时自动注册，从而实现集群的自组织 ，实现了通过命令拉起整个 Pika Cluster 集群。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F1931",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 1931"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fmachinly",target:"_blank",rel:"noopener noreferrer"}},[t._v("machinly"),n("OutboundLink")],1),t._v("。")])]),t._v(" "),n("h2",{attrs:{id:"_2-bug-修复"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-bug-修复"}},[t._v("#")]),t._v(" 2 bug 修复")]),t._v(" "),n("ul",[n("li",[t._v("1 调整了 Rate_limit 参数，修复了压测时出现 RPS 为 0 的情况 。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F2009",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 2009"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FMixficsol",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mixficsol"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("2 修复了 INFODATA 命令中对于遍历数据文件时出现空路径的逻辑判断。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F1996",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 1996"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FMixficsol",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mixficsol"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("3 修复了 Codis 在线上出现大毛刺的问题。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F2016",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 2016"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fchejinge",target:"_blank",rel:"noopener noreferrer"}},[t._v("chejinge"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("4 修复了 macOS 环境下编译使用 tools 导致编译不过的问题 。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F2011",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 2011"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FA2ureStone",target:"_blank",rel:"noopener noreferrer"}},[t._v("A2ureStone"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("li",[t._v("5 减少了 exporter 非必要日志的打印，降低 了资源利用率。"),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FOpenAtomFoundation%2Fpika%2Fpull%2F1945",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR 1945"),n("OutboundLink")],1),t._v("， 作者 "),n("a",{attrs:{href:"https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FMixficsol",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mixficsol"),n("OutboundLink")],1),t._v("。")])]),t._v(" "),n("h2",{attrs:{id:"_3-使用建议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用建议"}},[t._v("#")]),t._v(" 3 使用建议")]),t._v(" "),n("p",[t._v("本次新增了几个配置参数，大家在使用过程中，需要根据使用情况按需调整：")]),t._v(" "),n("ul",[n("li",[t._v("1 max-rsync-parallel-num：主从全量复制线程数，需要根据自己机器 CPU 核数和部署实例个数进行调整，建议最小设置为 2。")]),t._v(" "),n("li",[t._v("2 rate-limiter-bandwidth:  限制 RocksDB 数据库读写速度，限制数据库在一定时间内可以读写的数据量，默认 2000MiB/s，需要根据自己的机器性能和部署实例做调整。")]),t._v(" "),n("li",[t._v("max-background-jobs: compaction 和 flushdb 线程数，要根据自己机器 CPU 核数和部署实例个数进行调整，建议最小设置为 4。")]),t._v(" "),n("li",[t._v("3 throttle-bytes-per-second:  主从复制传输限速参数，默认为 200MiB/s，该参数可以根据机器网卡的配置及部署 pika 实例的个数进行调整。")])])])}),[],!1,null,null,null);n.default=e.exports}}]);